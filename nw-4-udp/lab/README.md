## Цель работы
Целью данной работы является изучение особенностей реализации протокола прикладно-
го уровня на базе ненадёжного протокола UDP.

## Исходные данные
Пример: 

- Клиент и сервер обмениваются UDP-сообщениями, каждое из которых содержит строко-
вое представление целого числа. Протокол взаимодействия клиента и сервера исключительно
прост: клиент посылает серверу число x, на что сервер возвращает клиенту число 2x.
- Прокси-сервер умеет эмулировать ошибки сети и предназначен для отладки протокола. Он
подходит для любых протоколов на базе UDP и обеспечивает взаимодействие произвольного
количества клиентов и одного сервера.


## Задание
Выполнение лабораторной работы состоит из двух частей.
1. Разработать вариант протокола из таблиц 1–??. Протокол должен базироваться на тек-
стовых сообщениях в формате JSON и использовать UDP в качестве транспорта. Ре-
зультатом разработки протокола должен быть набор типов языка Go, представляющих
сообщения, и документация к ним в виде комментариев в исходном тексте.
2. Написать на языке Go клиент и сервер, взаимодействующие по разработанному прото-
колу. Проверить их работоспособность с использованием прокси-сервера.

## Основные требования к клиенту и серверу:
1. полная проверка данных, получаемых из сети (необходимо учитывать, что сообщения
могут приходить в неправильном формате и в неправильном порядке, а также могут
содержать неправильные данные);
2. **устойчивость к потере, дублированию и неправильному порядку сообщений;**
3. возможность одновременного подключения нескольких клиентов к одному серверу;
4. сервер должен вести подробный лог всех ошибок, а также других важных событий.

## Пример

Вар 7. Протокол вычисления площадей кругов на плоскости, заданных центром и точкой на окружности

### Client
```
$ ./client.sh 
command: c
Center X coordinate:2
Center X coordinate:
Contour X coordinate:
Contour Y coordinate:
14:19:22.919231 DBG ~
   Sending. Retries left: 50, 5beb6460-b009-430e-9ff8-175bf6dea717
14:19:22.971717 DBG ~
   Sending. Retries left: 49, 5beb6460-b009-430e-9ff8-175bf6dea717
14:19:23.021943 DBG ~
   Sending. Retries left: 48, 5beb6460-b009-430e-9ff8-175bf6dea717
   ...
14:19:24.825325 DBG ~
   Sending. Retries left: 14, 5beb6460-b009-430e-9ff8-175bf6dea717
14:19:24.825747 DBG ~ Ack for message has been acquired
14:19:26.995695 DBG ~ Answer has been received
success: circle square is 3.141593
```

### Proxy, :5000 -> :6000
Proxy config:
- loss rate: 95%
- duplicate rate: 95%
```
$ ./proxy.sh
14:19:18.599098 INF ~ proxy listens incoming messages from clients
   proxy addr: 127.0.0.1:5000
   server addr: 127.0.0.1:6000
14:19:22.920251 INF ~ serving new client
   client: 127.0.0.1:56356
14:19:23.073948 INF ~ dropping message to server
   size: 123
   client: 127.0.0.1:6000
14:19:23.981917 INF ~ client => server
   size: 123
   client: 127.0.0.1:6000
14:19:23.991273 INF ~ client => server (duplicate)
   size: 123
   client: 127.0.0.1:6000
14:19:24.034050 INF ~ dropping message to client
   size: 83
   client: 127.0.0.1:56356
14:19:26.995624 INF ~ server => client
   size: 83
   client: 127.0.0.1:56356
14:19:26.999513 INF ~ server => client (duplicate)
   size: 83
   client: 127.0.0.1:56356
14:19:27.049801 INF ~ dropping message to client
   size: 83
   client: 127.0.0.1:56356
```


### Server :6000
```
$ ./server.sh 
14:18:42.663197 INF ~ server listens incoming messages from clients
   addr: 127.0.0.1:6000
14:19:23.982206 INF ~ Incoming msg
   msg: {"id":"5beb6460-b009-430e-9ff8-175bf6dea717","command":"c","data":{"center":{"x":"2","y":"1"},"contour":{"x":"2","y":"2"}}}
14:19:23.983511 DBG ~ Sending ACK 5beb6460-b009-430e-9ff8-175bf6dea717
14:19:23.991403 DBG ~ Ignored duplicate 5beb6460-b009-430e-9ff8-175bf6dea717
14:19:24.033857 DBG ~
   Sending. Retries left: 20, 5beb6460-b009-430e-9ff8-175bf6dea717
14:19:24.084186 DBG ~
   Sending. Retries left: 19, 5beb6460-b009-430e-9ff8-175bf6dea717
   ...
14:19:25.034508 INF Client 127.0.0.1:53585 square of circle has been counted
   value: 3.141593
14:19:26.035589 DBG ~ Sending DATA 5beb6460-b009-430e-9ff8-175bf6dea717
14:19:26.090654 DBG ~
   Sending. Retries left: 20, 5beb6460-b009-430e-9ff8-175bf6dea717
14:19:26.145627 DBG ~
   Sending. Retries left: 19, 5beb6460-b009-430e-9ff8-175bf6dea717
   ...
```
